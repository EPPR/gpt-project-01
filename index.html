<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connect to OpenAI API - Chat</title>
  </head>
  <body>
    <h1>OpenAI API Connection Example - Chat</h1>
    <label for="apiKeyInput">API Key:</label>
    <input type="password" id="apiKeyInput" placeholder="Enter your API key">
      <br><br>
    <label for="systemMessageInput">System Message:</label>
    <input type="text" id="systemMessageInput" placeholder="Enter a system message">
    <br><br>
    <label for="userMessageInput">User Message:</label>
    <input type="text" id="userMessageInput" placeholder="Enter a user message">
    
  
    <button id="requestButton">Request to OpenAI API</button>
    <pre id="responseOutput"></pre>
  
    <script>
      const apiKeyInput = document.getElementById('apiKeyInput');
      const systemMessageInput = document.getElementById('systemMessageInput');
      const userMessageInput = document.getElementById('userMessageInput');
  
      const requestButton = document.getElementById('requestButton');
      const responseOutput = document.getElementById('responseOutput');
  
      requestButton.addEventListener('click', async () => {
        const apiKey = apiKeyInput.value;
        const messages = [
              {role: "system", content: systemMessageInput.value},
              {role: "user", content: userMessageInput.value}
          ];
          console.log(messages, apiKey);
        const requestOptions = {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${apiKey}`
          },
          body: JSON.stringify({
            model: 'gpt-3.5-turbo',
            messages: messages,
            max_tokens: 50,
            temperature: 1,
          })
        };
  
        try {
          const response = await fetch('https://api.openai.com/v1/chat/completions', requestOptions);
          const jsonResponse = await response.json();
          responseOutput.textContent = JSON.stringify(jsonResponse, null, 2);
          console.log(jsonResponse.choices[0].message.content);
        } catch (error) {
          console.error('Error:', error);
        }
      });
    </script>
  
  
  </body></html>